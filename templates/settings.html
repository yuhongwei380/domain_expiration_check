<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿè®¾ç½® - åŸŸåç›‘æ§ Pro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        .container { max-width: 800px; margin-top: 30px; }
        .card { border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .section-title { border-left: 4px solid #0d6efd; padding-left: 10px; margin-bottom: 20px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">âš™ï¸ ç³»ç»Ÿè®¾ç½®</h2>
        <a href="/" class="btn btn-outline-secondary">
            â†© è¿”å›ä¸»é¡µ
        </a>
    </div>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form action="/settings" method="post">
        
        <!-- åŸºç¡€è§„åˆ™é…ç½® -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="section-title">è§„åˆ™é…ç½®</h5>
                <div class="mb-3">
                    <label class="form-label fw-bold">è¿‡æœŸå‘Šè­¦é˜ˆå€¼ (å¤©)</label>
                    <div class="input-group">
                        <input type="number" name="alert_days" class="form-control" value="{{ config.alert_days }}" required>
                        <span class="input-group-text">å¤©</span>
                    </div>
                    <div class="form-text">å½“åŸŸåå‰©ä½™å¤©æ•°å°äºæ­¤å€¼æ—¶ï¼ŒçŠ¶æ€å˜æ›´ä¸ºè­¦å‘Šï¼Œå¹¶åœ¨æ‰¹é‡åˆ·æ–°æ—¶å‘é€é€šçŸ¥ã€‚é»˜è®¤ 30 å¤©ã€‚</div>
                </div>
            </div>
        </div>

        <!-- æœºå™¨äººé…ç½® -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="section-title">IM æœºå™¨äººé€šçŸ¥</h5>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">é’‰é’‰ Webhook URL</label>
                    <input type="text" name="ding_webhook" class="form-control" value="{{ config.ding_webhook }}" placeholder="https://oapi.dingtalk.com/robot/send?access_token=...">
                    <div class="form-text">åœ¨é’‰é’‰ç¾¤è®¾ç½®ä¸­æ·»åŠ â€œè‡ªå®šä¹‰æœºå™¨äººâ€ï¼Œå®‰å…¨è®¾ç½®é€‰æ‹©â€œè‡ªå®šä¹‰å…³é”®è¯â€ï¼Œå¡«å†™â€œåŸŸåâ€ã€‚</div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">é£ä¹¦ Webhook URL</label>
                    <input type="text" name="feishu_webhook" class="form-control" value="{{ config.feishu_webhook }}" placeholder="https://open.feishu.cn/open-apis/bot/v2/hook/...">
                    <div class="form-text">åœ¨é£ä¹¦ç¾¤è®¾ç½®ä¸­æ·»åŠ æœºå™¨äººï¼Œæ— éœ€ç‰¹æ®Šå¯†é’¥ã€‚</div>
                </div>
            </div>
        </div>

        <!-- SMTP é…ç½® -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="section-title">é‚®ä»¶é€šçŸ¥ (SMTP)</h5>
                <div class="row g-3">
                    <div class="col-md-8">
                        <label class="form-label">SMTP æœåŠ¡å™¨åœ°å€</label>
                        <input type="text" name="smtp_host" class="form-control" value="{{ config.smtp_host }}" placeholder="ä¾‹å¦‚: smtp.qq.com">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">ç«¯å£</label>
                        <input type="number" name="smtp_port" class="form-control" value="{{ config.smtp_port }}" placeholder="465">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">å‘ä»¶äººé‚®ç®±</label>
                        <input type="email" name="smtp_user" class="form-control" value="{{ config.smtp_user }}" placeholder="your_email@qq.com">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">é‚®ç®±å¯†ç  / æˆæƒç </label>
                        <input type="password" name="smtp_pass" class="form-control" value="{{ config.smtp_pass }}">
                    </div>
                    <div class="col-12">
                        <label class="form-label">æ¥æ”¶å‘Šè­¦é‚®ç®±</label>
                        <input type="email" name="smtp_to" class="form-control" value="{{ config.smtp_to }}" placeholder="receiver@example.com">
                    </div>
                </div>
            </div>
        </div>

        <div class="d-grid gap-2 mb-5">
            <button type="submit" class="btn btn-primary btn-lg">ğŸ’¾ ä¿å­˜æ‰€æœ‰é…ç½®</button>
        </div>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
